(function(){'undefined'!==typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.plugins.KeepMarkup=!0,Prism.hooks.add('before-highlight',function(a){if(a.element.children.length){var b=0,c=[],d=function(e,g){var h={};g||(h.clone=e.cloneNode(!1),h.posOpen=b,c.push(h));for(var m,j=0,k=e.childNodes.length;j<k;j++)m=e.childNodes[j],1===m.nodeType?d(m):3===m.nodeType&&(b+=m.data.length);g||(h.posClose=b)};d(a.element,!0),c.length&&(a.keepMarkup=c)}}),Prism.hooks.add('after-highlight',function(a){if(a.keepMarkup&&a.keepMarkup.length){var b=function(c,d){for(var h,e=0,g=c.childNodes.length;e<g;e++){if(h=c.childNodes[e],1!==h.nodeType)3===h.nodeType&&(!d.nodeStart&&d.pos+h.data.length>d.node.posOpen&&(d.nodeStart=h,d.nodeStartPos=d.node.posOpen-d.pos),d.nodeStart&&d.pos+h.data.length>=d.node.posClose&&(d.nodeEnd=h,d.nodeEndPos=d.node.posClose-d.pos),d.pos+=h.data.length);else if(!b(h,d))return!1;if(d.nodeStart&&d.nodeEnd){var j=document.createRange();return j.setStart(d.nodeStart,d.nodeStartPos),j.setEnd(d.nodeEnd,d.nodeEndPos),d.node.clone.appendChild(j.extractContents()),j.insertNode(d.node.clone),j.detach(),!1}}return!0};a.keepMarkup.forEach(function(c){b(a.element,{node:c,pos:0})})}}))})();