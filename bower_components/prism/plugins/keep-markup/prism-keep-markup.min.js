!function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.plugins.KeepMarkup=!0,Prism.hooks.add("before-highlight",function(b){if(b.element.children.length){var c=0,f=[],g=function(h,i){var j={};i||(j.clone=h.cloneNode(!1),j.posOpen=c,f.push(j));for(var m,k=0,l=h.childNodes.length;l>k;k++)m=h.childNodes[k],1===m.nodeType?g(m):3===m.nodeType&&(c+=m.data.length);i||(j.posClose=c)};g(b.element,!0),f.length&&(b.keepMarkup=f)}}),Prism.hooks.add("after-highlight",function(b){if(b.keepMarkup&&b.keepMarkup.length){var c=function(f,g){for(var j,h=0,i=f.childNodes.length;i>h;h++){if(j=f.childNodes[h],1!==j.nodeType)3===j.nodeType&&(!g.nodeStart&&g.pos+j.data.length>g.node.posOpen&&(g.nodeStart=j,g.nodeStartPos=g.node.posOpen-g.pos),g.nodeStart&&g.pos+j.data.length>=g.node.posClose&&(g.nodeEnd=j,g.nodeEndPos=g.node.posClose-g.pos),g.pos+=j.data.length);else if(!c(j,g))return!1;if(g.nodeStart&&g.nodeEnd){var k=document.createRange();return k.setStart(g.nodeStart,g.nodeStartPos),k.setEnd(g.nodeEnd,g.nodeEndPos),g.node.clone.appendChild(k.extractContents()),k.insertNode(g.node.clone),k.detach(),!1}}return!0};b.keepMarkup.forEach(function(f){c(b.element,{node:f,pos:0})})}}))}();